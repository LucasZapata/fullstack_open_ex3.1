(this["webpackJsonpexcercise_2.6"]=this["webpackJsonpexcercise_2.6"]||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(14),c=n.n(r),o=n(3),i=n(1),u=n(4),a=n.n(u),s="/api/persons",l=function(){return a.a.get(s).then((function(e){return e.data}))},d=function(e){return a.a.post(s,e).then((function(e){return e.data}))},b=function(e,t){return a.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},j=function(e){return a.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},f=n(0),m=function(e){var t=e.entries,n=e.filter,r=e.deleteEntry;return Object(f.jsx)("ul",{children:function(){var e=t;return""!==n&&(e=t.filter((function(e){return e.name.toLowerCase()===n}))),e}().map((function(e){return Object(f.jsxs)("li",{children:[e.name," ",e.number," ",Object(f.jsx)("button",{onClick:function(){return r(e.id,e.name)},children:"DELETE"})]},e.id)}))})},h=function(e){var t=e.onSubmit,n=e.newName,r=e.onTextChange,c=e.newNumber,o=e.onNumberChange;return Object(f.jsxs)("form",{onSubmit:t,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:n,onChange:r})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:c,onChange:o})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.FilterTerm,n=e.onFilterChange,r=e.SetFilter;return Object(f.jsxs)("form",{onSubmit:r,children:[Object(f.jsx)("div",{children:Object(f.jsx)("input",{value:t,onChange:n})}),Object(f.jsx)("button",{type:"submit",children:"Search"})]})},g=function(e){var t=e.message,n=e.style;return null===t?null:Object(f.jsx)("div",{className:"error",style:n,children:t})},x=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)(""),u=Object(o.a)(c,2),a=u[0],s=u[1],x=Object(i.useState)(""),p=Object(o.a)(x,2),v=p[0],S=p[1],y=Object(i.useState)(""),w=Object(o.a)(y,2),C=w[0],T=w[1],E=Object(i.useState)(""),N=Object(o.a)(E,2),k=N[0],F=N[1],D=Object(i.useState)(null),L=Object(o.a)(D,2),z=L[0],I=L[1],J=Object(i.useState)(null),R=Object(o.a)(J,2),_=R[0],B=R[1];Object(i.useEffect)((function(){l().then((function(e){return r(e)}))}),[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(O,{FilterTerm:C,onFilterChange:function(e){return T(e.target.value)},SetFilter:function(e){e.preventDefault(),F(C.toLowerCase())}}),Object(f.jsx)(g,{message:_,style:{color:"red",background:"lightgrey",borderStyle:"solid",borderRadius:5,padding:10,fontSize:20}}),Object(f.jsx)(g,{message:z,style:{color:"green",background:"lightgrey",borderStyle:"solid",borderRadius:5,padding:10,fontSize:20}}),Object(f.jsx)(h,{newName:a,newNumber:v,onTextChange:function(e){return s(e.target.value)},onNumberChange:function(e){return S(e.target.value)},onSubmit:function(e){e.preventDefault();var t={name:a,number:v},c=n.find((function(e){return e.name===a}));if(console.log(c),void 0===c)d(t).then((function(e){r(n.concat(e)),I("".concat(e.name," added to database")),setTimeout((function(){I(null)}),5e3)})).catch((function(e){"ValidationError"===e.response.data.name&&(B(e.response.data.message),setTimeout((function(){B(null)}),5e3))}));else if(c.number!==t.number){if(window.confirm("Change number for ".concat(a,"?")))b(c.id,t).then((function(e){r(n.map((function(t){return t.id!==c.id?t:e}))),I("".concat(e.name," edited")),setTimeout((function(){I(null)}),5e3)}))}else window.alert("".concat(a,", number ").concat(v,", is already added to phonebook.")),I("".concat(a," already present")),setTimeout((function(){I(null)}),5e3)}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(m,{entries:n,filter:k,deleteEntry:function(e,t){if(window.confirm("Delete entry ".concat(t,"?")))j(e).then(r(n.filter((function(t){return t.id!==e})))).catch((function(e){B("Information of ".concat(t," not present in server")),setTimeout((function(){B(null)}),5e3)}))}})]})};c.a.render(Object(f.jsx)(x,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.e4cbadf0.chunk.js.map