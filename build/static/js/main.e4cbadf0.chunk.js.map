{"version":3,"sources":["components/NetworkComm.js","components/PhoneList.js","components/NewEntry.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["url","axios","get","then","response","data","NewData","post","id","put","delete","PhoneList","entries","filter","deleteEntry","res","entry","name","toLowerCase","result","map","number","onClick","NewEntry","onSubmit","newName","onTextChange","newNumber","onNumberChange","value","onChange","type","Filter","FilterTerm","onFilterChange","SetFilter","Notification","message","style","className","App","useState","persons","setPersons","setNewName","setNewNumber","filterForm","setFilterForm","filterTerm","setFilterTerm","notificationMessage","setNotificationMessage","warningMessage","setWarningMessage","useEffect","NetworkComm","event","target","preventDefault","color","background","borderStyle","borderRadius","padding","fontSize","newPerson","existingData","find","n","console","log","undefined","concat","setTimeout","catch","error","window","confirm","p","alert","personId","personName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e4cbadf0.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst url = '/api/persons'\r\n\r\nconst GetDB = () =>{\r\n    const request = axios.get(url)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst AddDB = (NewData) =>{\r\n    const request = axios.post(url, NewData)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst EditDB = (id, NewData) =>{\r\n    const request = axios.put(`${url}/${id}`, NewData)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst RemoveDB = (id) =>{\r\n    const request = axios.delete(`${url}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n\r\nexport default{GetDB, AddDB, EditDB, RemoveDB}","import React from 'react'\r\n\r\nconst PhoneList = ({entries, filter, deleteEntry}) =>{\r\n    const result = () => {\r\n        let res = entries\r\n        if (filter !==  ''){\r\n            res = entries.filter(entry => entry.name.toLowerCase() === filter)}\r\n        return(res)\r\n        }\r\n        \r\n    return(\r\n     <ul>\r\n         {result().map(entry => <li key = {entry.id}>{entry.name} {entry.number} <button onClick={() => deleteEntry(entry.id, entry.name)}>DELETE</button></li>)}\r\n    </ul>)\r\n}\r\n\r\nexport default PhoneList","import React from 'react'\r\n\r\nconst NewEntry = ({onSubmit, newName, onTextChange, newNumber, onNumberChange}) => {\r\n    return(\r\n        <form onSubmit = {onSubmit}>\r\n            <div>\r\n                name: <input value = {newName} onChange = {onTextChange}/>\r\n            </div>\r\n            <div>\r\n                number: <input value = {newNumber} onChange = {onNumberChange}/>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>)}\r\n\r\nexport default NewEntry","import React from 'react'\r\n\r\nconst Filter = ({FilterTerm, onFilterChange, SetFilter}) =>{\r\n    return(\r\n    <form onSubmit = {SetFilter}>\r\n        <div><input value = {FilterTerm} onChange = {onFilterChange}/></div>\r\n        <button type='submit'>Search</button>\r\n    </form>)\r\n}\r\n\r\nexport default Filter","import React from \"react\"\r\n\r\nconst Notification = ({message, style}) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\" style={style}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  export default Notification","import React, { useEffect, useState } from 'react'\nimport NetworkComm from './components/NetworkComm.js'\nimport PhoneList from './components/PhoneList.js'\nimport NewEntry from './components/NewEntry.js'\nimport Filter from './components/Filter.js'\nimport Notification from './components/Notification.js'\n\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filterForm, setFilterForm] = useState('')\n  const [filterTerm, setFilterTerm] = useState('')\n  const [notificationMessage, setNotificationMessage] = useState(null)\n  const [warningMessage, setWarningMessage] = useState(null)\n  \n\n  const cssWarning = {color: 'red', background: 'lightgrey', borderStyle: 'solid', borderRadius: 5, padding: 10, fontSize:20}\n  const cssNotification = {color: 'green', background: 'lightgrey', borderStyle: 'solid', borderRadius: 5, padding: 10, fontSize:20}\n\n  useEffect(() => {\n    const dbData = NetworkComm.GetDB().then(data => setPersons(data))}, [])\n\n  const writeName = (event) => setNewName(event.target.value)\n  const writeNumber = (event) => setNewNumber(event.target.value)\n  const writeFilterForm = (event) => setFilterForm(event.target.value)\n  const setFilter = (event) => {\n    event.preventDefault()\n    setFilterTerm(filterForm.toLowerCase())}\n\n  const addName = (event) => {\n    event.preventDefault()\n    const newPerson = {name: newName, number: newNumber }\n    const existingData = persons.find(n => n.name === newName)\n    console.log(existingData)\n    if (existingData === undefined) {\n      const dbData = NetworkComm.AddDB(newPerson).then(data => {\n        setPersons(persons.concat(data))\n        setNotificationMessage(`${data.name} added to database`)\n        setTimeout(() => {setNotificationMessage(null)}, 5000)})\n        .catch(error => {\n          if (error.response.data.name === 'ValidationError'){\n            setWarningMessage(error.response.data.message)\n            setTimeout(() => {setWarningMessage(null)}, 5000)\n          }}\n        )\n    }\n    else if (existingData.number !== newPerson.number){\n      const confirmation = window.confirm(`Change number for ${newName}?`)\n      if (confirmation){\n      const dbData = NetworkComm.EditDB(existingData.id, newPerson).then(data => {\n        setPersons(persons.map(p => p.id !== existingData.id ? p: data))\n        setNotificationMessage(`${data.name} edited`)\n        setTimeout(() => {setNotificationMessage(null)}, 5000)}) \n      }\n    }\n    else\n      {window.alert(`${newName}, number ${newNumber}, is already added to phonebook.`)\n      setNotificationMessage(`${newName} already present`)\n      setTimeout(() => {setNotificationMessage(null)}, 5000)}\n  }\n\n  const deletePerson = (personId, personName) => {\n    const confirmation = window.confirm(`Delete entry ${personName}?`)\n    if (confirmation){\n      const dbData = NetworkComm.RemoveDB(personId).\n        then(setPersons(persons.filter(p => p.id !== personId))).\n          catch(error => {setWarningMessage(`Information of ${personName} not present in server`)\n          setTimeout(() => {setWarningMessage(null)}, 5000)})\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter FilterTerm={filterForm} onFilterChange={writeFilterForm} SetFilter={setFilter} />\n      <Notification message = {warningMessage} style = {cssWarning}/>\n      <Notification message = {notificationMessage} style = {cssNotification}/>\n      <NewEntry newName={newName} newNumber={newNumber} onTextChange={writeName} onNumberChange={writeNumber} onSubmit={addName} />\n      <h2>Numbers</h2>\n      <PhoneList entries={persons} filter={filterTerm} deleteEntry={deletePerson} />\n    </div>\n  )\n}\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)\n"],"sourceRoot":""}